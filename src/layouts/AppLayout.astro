---
import '../styles/app.css';
import '../styles/dashboard.css';
import '../styles/feedback.css';
import '../styles/language-toggle.css';
import '../styles/notification-banner.css';
import '../styles/tooltip.css';
import '../styles/debug-panel.css';

interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1a1a1a" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="GettingShitDone" />
    <link rel="apple-touch-icon" href="/icon-192.svg" />
    <link rel="manifest" href="/manifest.json" />

    <!-- SEO -->
    <meta name="description" content="A simple Pomodoro timer that helps you focus and get things done. Track your progress, manage tasks, and boost productivity." />
    <meta name="keywords" content="pomodoro, timer, productivity, focus, tasks, ADHD, time management" />

    <title>{title}</title>
  </head>
  <body>
    <slot />

    <!-- Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', async () => {
          try {
            const registration = await navigator.serviceWorker.register('/sw.js', {
              scope: '/'
            });
            console.log('SW registered:', registration.scope);
          } catch (error) {
            console.log('SW registration failed:', error);
          }
        });
      }
    </script>
  </body>
</html>

<style is:global>
  :root {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    line-height: 1.5;
    font-weight: 400;

    color-scheme: dark;
    color: rgba(255, 255, 255, 0.87);
    background-color: #1a1a1a;

    font-synthesis: none;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    margin: 0;
    min-width: 320px;
    min-height: 100vh;
    background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
  }
</style>
